# üîê Security Guidelines - Cargo Logistics

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤ production!

### 1. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
cp .env.example .env

# –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env –≤ git!
# –û–Ω —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore
```

### 2. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ .env

#### 2.1 ADMIN_PASSWORD

```env
# ‚ùå –ü–õ–û–•–û (–¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å)
ADMIN_PASSWORD=admin123

# ‚úÖ –•–û–†–û–®–û (—Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å)
ADMIN_PASSWORD=My$uperStr0ng!P@ssw0rd2024#Cargo
```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ú–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–≤–∞—Ä–Ω—ã–µ —Å–ª–æ–≤–∞
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è, –Ω–æ–º–µ—Ä–∞ –∏ —Ç.–¥.

#### 2.2 SECRET_KEY

```env
# ‚ùå –ü–õ–û–•–û (–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∫–ª—é—á)
SECRET_KEY=your-secret-key-change-in-production

# ‚úÖ –•–û–†–û–®–û (—Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
SECRET_KEY=xJh8kP2mN9vL4qR7wE3tY6uI0oP5aS1dF8gH2jK9lM3nB6vC4x
```

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–ª—é—á–∞:

```bash
# Python
python -c "import secrets; print(secrets.token_urlsafe(32))"

# OpenSSL
openssl rand -base64 32

# Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

#### 2.3 POSTGRES_PASSWORD

```env
# ‚ùå –ü–õ–û–•–û
POSTGRES_PASSWORD=cargo_pass

# ‚úÖ –•–û–†–û–®–û
POSTGRES_PASSWORD=C@rg0DB#SecureP@ss2024!PostGres
```

–ò –æ–±–Ω–æ–≤–∏—Ç–µ DATABASE_URL:

```env
DATABASE_URL=postgresql://cargo_user:C@rg0DB#SecureP@ss2024!PostGres@postgres:5432/cargo_db
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

#### Checklist:

- [ ] `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏ –ù–ï –≤ git
- [ ] `ADMIN_PASSWORD` –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ —Å–ª–æ–∂–Ω—ã–π
- [ ] `SECRET_KEY` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Å–ª—É—á–∞–π–Ω–æ (32+ —Å–∏–º–≤–æ–ª–∞)
- [ ] `POSTGRES_PASSWORD` –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ —Å–ª–æ–∂–Ω—ã–π
- [ ] `DATABASE_URL` –æ–±–Ω–æ–≤–ª—ë–Ω —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
- [ ] –í—Å–µ –ø–∞—Ä–æ–ª–∏ —Ä–∞–∑–Ω—ã–µ –º–µ–∂–¥—É dev –∏ production
- [ ] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–∞—Ä–æ–ª–µ–π –≤ –∫–æ–¥–µ
- [ ] `.gitignore` —Å–æ–¥–µ—Ä–∂–∏—Ç `.env`

### 4. –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å

‚ùå **–ù–ï —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ docker-compose.yml –¥–ª—è –ø–∞—Ä–æ–ª–µ–π**
   - –í—Å–µ –ø–∞—Ä–æ–ª–∏ —Ç–æ–ª—å–∫–æ –≤ `.env`

‚ùå **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ .env –≤ git**
   - –î–∞–∂–µ –µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π

‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏**
   - "admin", "password", "123456" –∏ —Ç.–¥.

‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –ø–∞—Ä–æ–ª—å –≤–µ–∑–¥–µ**
   - –†–∞–∑–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –ë–î, –∞–¥–º–∏–Ω–∫–∏, —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

‚ùå **–ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª–∏ —á–µ—Ä–µ–∑ email/slack**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ secure vault (1Password, LastPass –∏ —Ç.–¥.)

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 5.1 HTTPS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production!)

```nginx
server {
    listen 443 ssl;
    server_name your-domain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://backend:8000;
    }
}
```

#### 5.2 Rate Limiting

–î–æ–±–∞–≤—å—Ç–µ –≤ nginx –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CloudFlare

#### 5.3 Firewall

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
ufw allow 22/tcp   # SSH
ufw allow 80/tcp   # HTTP
ufw allow 443/tcp  # HTTPS
ufw enable
```

#### 5.4 –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –û–±–Ω–æ–≤–ª—è–π—Ç–µ Docker –æ–±—Ä–∞–∑—ã
docker-compose pull
docker-compose up -d

# –û–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
pip install -U -r requirements.txt
```

#### 5.5 Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π backup
docker-compose exec postgres pg_dump -U cargo_user cargo_db > backup-$(date +%Y%m%d).sql

# –•—Ä–∞–Ω–∏—Ç–µ –±—ç–∫–∞–ø—ã –≤ –Ω–∞–¥—ë–∂–Ω–æ–º –º–µ—Å—Ç–µ (S3, Google Cloud Storage)
```

### 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 6.1 –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:

```bash
docker-compose logs backend | grep "admin"
```

#### 6.2 Failed login attempts

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞

#### 6.3 Database access

–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ PostgreSQL —Ç–æ–ª—å–∫–æ –∏–∑ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 7. –í —Å–ª—É—á–∞–µ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏

–ï—Å–ª–∏ –ø–∞—Ä–æ–ª–∏ —É—Ç–µ–∫–ª–∏:

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ** —Å–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker-compose restart`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
4. –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã
5. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ SECRET_KEY (–ø–æ—Ç—Ä–µ–±—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ù–∞—à–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å? –°–æ–æ–±—â–∏—Ç–µ –Ω–∞ security@your-domain.com

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [FastAPI Security](https://fastapi.tiangolo.com/tutorial/security/)
- [Docker Security Best Practices](https://docs.docker.com/develop/security-best-practices/)
